<!-- templates/partials/transaction_row.html -->
<li class="tx-row flex items-start sm:items-center justify-between gap-3 px-4 py-3 bg-white dark:bg-gray-700 rounded-lg shadow-sm"
    data-id="{{ tx.id }}">

    <button type="button"
            class="tx-handle mt-1 sm:mt-0 cursor-move select-none text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"
            title="Drag to reorder"
            aria-label="Drag to reorder">
        ‚ò∞
    </button>

    <form method="POST"
            action="{{ url_for('update_transaction', transaction_id=tx.id) }}"
            class="flex-grow flex flex-col sm:flex-row sm:items-center gap-2">

            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <span contenteditable="true"
                data-id="{{ tx.id }}"
                class="tx-desc w-full sm:w-1/3 bg-transparent outline-none text-black dark:text-white">
                {{ tx.description }}
            </span>

            <span contenteditable="true"
                data-id="{{ tx.id }}"
                data-type="{{ tx.type }}"
                class="tx-amount w-full sm:w-1/4 bg-transparent outline-none text-right text-black dark:text-white">
            ${{ "%.2f"|format(tx.amount) }}
        </span>

        <select data-id="{{ tx.id }}"
                class="tx-type min-w-[100px] sm:w-[110px] bg-white dark:bg-gray-900 text-black dark:text-white border border-gray-300 dark:border-gray-700 rounded px-2 py-1">
            <option value="income" {% if tx.type == "income" %}selected{% endif %}>Income</option>
            <option value="expense" {% if tx.type == "expense" %}selected{% endif %}>Expense</option>
        </select>

        <button type="submit" class="hidden">Save</button>
    </form>

    <form class="tx-delete-form"
            method="POST"
            action="{{ url_for('delete_transaction', transaction_id=tx.id) }}">

        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <button type="submit"
                class="text-red-500 hover:text-red-700 text-xl leading-none"
                title="Delete"
                aria-label="Delete transaction">
            üóëÔ∏è
        </button>
    </form>
</li>